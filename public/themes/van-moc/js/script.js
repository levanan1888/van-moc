document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".menu-toggle"),t=document.querySelector(".main-nav");e&&t&&e.addEventListener("click",function(){t.classList.toggle("active"),e.classList.toggle("active")});var n=document.querySelectorAll(".menu-item-has-children");n.forEach(function(e){var t=e.querySelector("a"),n=e.querySelector(".toggle-icon");t&&n&&t.addEventListener("click",function(t){window.innerWidth<=992&&(t.preventDefault(),e.classList.toggle("active"),e.classList.contains("active")?n.style.transform="rotate(90deg)":n.style.transform="rotate(0deg)")})}),document.addEventListener("click",function(n){window.innerWidth<=992&&(t.contains(n.target)||e.contains(n.target)||t.classList.remove("active"))}),window.addEventListener("resize",function(){window.innerWidth>992&&(t.classList.remove("active"),e.classList.remove("active"),n.forEach(function(e){e.classList.remove("active");var t=e.querySelector(".toggle-icon");t&&(t.style.transform="rotate(0deg)")}))});var o=document.querySelector(".custom-contact-form");o&&o.addEventListener("submit",function(e){e.preventDefault();var t=this,n=t.querySelector('button[type="submit"]'),o=n.textContent;t.classList.add("loading"),n.disabled=!0,n.textContent="Đang gửi...",t.querySelectorAll(".alert").forEach(function(e){return e.remove()});var r=new FormData(t);fetch(t.action,{method:"POST",body:r,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(e){return e.json()}).then(function(e){t.classList.remove("loading"),n.disabled=!1,n.textContent=o;var r=document.createElement("div");r.className=e.error?"alert alert-danger":"alert alert-success",r.textContent=e.message,t.insertBefore(r,t.firstChild),e.error||(t.reset(),setTimeout(function(){r.remove()},5e3))}).catch(function(e){t.classList.remove("loading"),n.disabled=!1,n.textContent=o;var r=document.createElement("div");r.className="alert alert-danger",r.textContent="Có lỗi xảy ra, vui lòng thử lại sau!",t.insertBefore(r,t.firstChild)})});var r=document.getElementById("back2top");r&&(window.addEventListener("scroll",function(){window.pageYOffset>300?r.classList.add("show"):r.classList.remove("show")}),r.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))});